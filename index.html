<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–æ–≥–æ–≤–æ –Ω–æ–≤–µ–ª–ª</title>
    <meta name="description" content="–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –Ω–æ–≤–µ–ª–ª –¥–ª—è –õ–æ–≥–æ–≤–∞ –°–æ–ª—ë–Ω–æ–π –†—ã–±–∫–∏">
    <meta name="keywords" content="–Ω–æ–≤–µ–ª–ª—ã, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –ø–µ—Ä–µ–≤–æ–¥—ã">

    <script>
    (function() {
        try {
            const theme = localStorage.getItem('novel-library-theme') || 'classic';
            const mode = localStorage.getItem('novel-library-mode') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
            document.documentElement.setAttribute('data-mode', mode);

            // –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const token = localStorage.getItem('session_token');
            const userRole = localStorage.getItem('userRole');
            const user = localStorage.getItem('currentUser');
        
            if (token && user) {
                document.documentElement.classList.add('user-logged-in');
            
                // –î–æ–±–∞–≤–ª—è–µ–º —Ä–æ–ª—å –¥–ª—è CSS
                if (userRole) {
                    document.documentElement.setAttribute('data-user-role', userRole);
                }
            
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –∞–¥–º–∏–Ω–∫—É
                if (userRole === 'admin' || userRole === 'owner') {
                    document.documentElement.classList.add('is-admin');
                }
            
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ
                if (['creator', 'admin', 'owner'].includes(userRole)) {
                    document.documentElement.classList.add('can-create');
                }
            }
        } catch (e) {
            console.error('Early init error:', e);
        }
    })();
    </script>

    <link rel="stylesheet" href="style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat&family=Playfair+Display:wght@500&display=swap" rel="stylesheet">

</head>
<body>

    <div id="chapter-load-overlay"></div>

    <div id="app" class="app">
        <header class="header is-hidden" role="banner" id="main-header">
            <div class="header-content">
                <h1 class="logo">–õ–æ–≥–æ–≤–æ –Ω–æ–≤–µ–ª–ª</h1>
                
                <div class="header-actions">
                    <div class="theme-switcher">
                        <button id="theme-toggle" class="theme-btn" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                            <span class="theme-icon">üåô</span>
                        </button>
                        <div id="theme-menu" class="theme-menu hidden">
                            <h4>–¢–µ–º—ã</h4>
                            <button class="theme-option" data-theme="classic">‚òØ –ö–ª–∞—Å—Å–∏–∫–∞</button>
                            <button class="theme-option" data-theme="solar">üåÖ –°–æ–ª–Ω–µ—á–Ω–∞—è</button>
                            <button class="theme-option" data-theme="forest">üå≤ –õ–µ—Å–Ω–∞—è</button>
                            <div class="theme-auto">
                                <label><input type="checkbox" id="auto-theme-toggle"> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</label>
                            </div>
                        </div>
                    </div>
                    <div id="user-info" class="user-info-display">

                        <button id="profile-btn" class="btn btn-secondary user-icon" onclick="navigateTo('profile')" title="–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å">
                            (¬∞„É≠¬∞) !
                        </button>

                    </div>

                    <button id="login-btn" class="btn btn-login" onclick="showModal('auth-modal')">–í–æ–π—Ç–∏</button>

                    <button id="admin-btn" class="btn btn-secondary admin-only" style="display: none;" aria-label="–û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å">
                        <span>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
                    </button>
                </div>
            </div>
        </header>

<script>
(function() {
    try {
        const urlParams = new URLSearchParams(window.location.search);
        const page = urlParams.get('page') || 'home';
        const header = document.getElementById('main-header');
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–≤–æ–π ID –æ–≤–µ—Ä–ª–µ—è –∏–∑ —ç—Ç–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
        const overlay = document.getElementById('chapter-load-overlay');

        if (page === 'chapter-read') {
            if (overlay) {
                // 1. –ü–û–ö–ê–ó–´–í–ê–ï–ú –û–í–ï–†–õ–ï–ô
                overlay.style.display = 'block';

                // ‚ú® 2. –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –ì–ï–ù–ï–†–ê–¶–ò–Ø –ü–£–ó–´–†–¨–ö–û–í ‚ú®
                let bubblesHtml = '<div class="bubbles-container">';

                const bubbleCount = 50;     // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
                const blurProbability = 0.4; // –®–∞–Ω—Å —Ä–∞–∑–º—ã—Ç–∏—è (40%)
                const blurAmount = '3.5px';    // –°–∏–ª–∞ —Ä–∞–∑–º—ã—Ç–∏—è

                for (let i = 0; i < bubbleCount; i++) {
                    const size = 5 + Math.random() * 25;
                    const left = Math.random() * 100;
                    const delay = Math.random() * 5;
                    const duration = 5 + Math.random() * 5;
                    let opacity = 0.1 + Math.random() * 0.3; // –ù–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å

                    let individualStyle = ''; // –°—Ç—Ä–æ–∫–∞ –¥–ª—è –¥–æ–ø. —Å—Ç–∏–ª–µ–π

                    // –†–µ—à–∞–µ–º, –±—É–¥–µ—Ç –ª–∏ –ø—É–∑—ã—Ä–µ–∫ —Ä–∞–∑–º—ã—Ç
                    if (Math.random() < blurProbability) {
                        individualStyle += `filter: blur(${blurAmount});`;
                        // –ó–∞—Ç–µ–º–Ω—è–µ–º (—É–º–µ–Ω—å—à–∞–µ–º opacity) —Ä–∞–∑–º—ã—Ç—ã–µ
                        opacity = Math.max(0.02, opacity * 0.4);
                    }

                    // –î–æ–±–∞–≤–ª—è–µ–º opacity –∏ individualStyle –≤ style
                    bubblesHtml += `
                        <div class="bubble" style="
                            left: ${left}%;
                            width: ${size}px;
                            height: ${size}px;
                            opacity: ${opacity}; /* –ó–∞–¥–∞–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å */
                            animation-delay: ${delay}s;
                            animation-duration: ${duration}s;
                            ${individualStyle} /* –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–º—ã—Ç–∏–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ */
                        "></div>`;
                }
                bubblesHtml += '</div>';
                // ‚ú® –ö–û–ù–ï–¶ –û–ë–ù–û–í–õ–ï–ù–ù–û–ô –ì–ï–ù–ï–†–ê–¶–ò–ò ‚ú®

                // 3. –í—Å—Ç–∞–≤–ª—è–µ–º HTML –≤ –æ–≤–µ—Ä–ª–µ–π
                overlay.innerHTML = bubblesHtml;
            }
        } else {
            // –î—Ä—É–≥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: –£–ë–ò–†–ê–ï–ú –ö–õ–ê–°–° –°–ö–†–´–¢–ò–Ø –° –•–ï–î–ï–†–ê
            if (header) header.classList.remove('is-hidden');
       }
    } catch (e) {
        console.error('Inline overlay/header script error:', e);
         // –ó–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç: –ø–æ–∫–∞–∑–∞—Ç—å —Ö–µ–¥–µ—Ä, –µ—Å–ª–∏ –ù–ï —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —á—Ç–µ–Ω–∏—è
         if (!window.location.search.includes('page=chapter-read')) {
            const header = document.getElementById('main-header');
            if (header) header.classList.remove('is-hidden');
        }
   }
})();
</script>
        
        <main class="main" role="main">

            <section id="search-section" class="search-section" style="display: none;">
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∞–≤—Ç–æ—Ä—É..." class="search-input" aria-label="–ü–æ–∏—Å–∫ –Ω–æ–≤–µ–ª–ª"/>
                        <button id="search-btn" class="btn btn-primary" aria-label="–ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫">–ü–æ–∏—Å–∫</button>
                    </div>
                    <div class="action-buttons">
                        <button id="filter-toggle" class="btn btn-secondary">–§–∏–ª—å—Ç—Ä—ã</button>

                        <div class="sort-controls">
                            <label for="sort-select" class="visually-hidden">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ:</label>
                            <button id="sort-btn" class="btn btn-secondary">
                                <span class="sort-icon">‚áÖ</span>
                            </button>
                        </div>

                        <button id="add-novel-btn" class="btn btn-primary btn-add-novel">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–µ–ª–ª—É</button>
                    </div>
                </div>

                <div id="filters-panel" class="filters-panel expanded" style="display: none;"> <div class="filters-content">
                    <h3><i class="fas fa-filter"></i> –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –§–∏–ª—å—Ç—Ä—ã</h3>

                    <div class="filters-grid"> <div class="filter-column">
                            <div class="filter-group">
                                <label for="language-filter">–Ø–∑—ã–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞:</label>
                                <select id="language-filter" class="form-select"><option value="">–í—Å–µ</option></select>
                            </div>
                            <div class="filter-group">
                                <label for="era-filter">–≠—Ä–∞:</label>
                                <select id="era-filter" class="form-select"><option value="">–í—Å–µ</option></select>
                            </div>
                             <div class="filter-group">
                                <label for="orientation-filter">–¢–∏–ø –æ—Ç–Ω–æ—à–µ–Ω–∏–π:</label>
                                <select id="orientation-filter" class="form-select"><option value="">–í—Å–µ</option></select>
                            </div>
                            <div class="filter-group">
                                <label for="perspective-filter">–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞:</label>
                                <select id="perspective-filter" class="form-select"><option value="">–í—Å–µ</option></select>
                            </div>
                        </div>

                        <div class="filter-column">
                            <div class="filter-group">
                                <label for="original-status-filter">–°—Ç–∞—Ç—É—Å –æ—Ä–∏–≥–∏–Ω–∞–ª–∞:</label>
                                <select id="original-status-filter" class="form-select"><option value="">–í—Å–µ</option></select>
                            </div>
                            <div class="filter-group">
                                <label for="translation-status-filter">–°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–≤–æ–¥–∞:</label>
                                <select id="translation-status-filter" class="form-select"><option value="">–í—Å–µ</option></select>
                            </div>
                            <div class="filter-group range-filter">
                                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–ª–∞–≤:</label>
                                <div class="range-inputs">
                                    <input type="number" id="chapters-min" placeholder="–û—Ç" min="0" class="form-input">
                                    <span>-</span>
                                    <input type="number" id="chapters-max" placeholder="–î–æ" min="0" class="form-input">
                                </div>
                            </div>
                             <div class="filter-group range-filter">
                                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ (–ø–µ—Ä–µ–≤–æ–¥):</label>
                                 <div class="range-inputs">
                                    <input type="number" id="words-min" placeholder="–û—Ç" min="0" class="form-input">
                                     <span>-</span>
                                    <input type="number" id="words-max" placeholder="–î–æ" min="0" class="form-input">
                                </div>
                            </div>
                        </div>

                        <div class="filter-column filter-column-wide"> <div class="filter-group taxonomy-filter">
                            <fieldset class="form-section">
                            <legend>–§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–≥–∞–º</legend>

                            <div class="form-group">
                                <label>–†–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω–∏—è:</label>
                                <div class="filter-mode-options">
                                    <label>
                                        <input type="radio" name="include-tag-mode" value="any" checked onchange="applyFiltersAndSort()"> –õ—é–±–æ–π –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
                                    </label>
                                    <label>
                                        <input type="radio" name="include-tag-mode" value="all" onchange="applyFiltersAndSort()"> –í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
                                    </label>
                                </div>
                                <div class="selected-tags-display" id="selected-include-tags">
                                    </div>
                            </div>

                            <hr style="margin: 10px 0;">

                            <div class="form-group">
                                <label>–†–µ–∂–∏–º –∏—Å–∫–ª—é—á–µ–Ω–∏—è:</label>
                                <div class="filter-mode-options">
                                    <label>
                                        <input type="radio" name="exclude-tag-mode" value="any" checked onchange="applyFiltersAndSort()"> –õ—é–±–æ–π –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
                                    </label>
                                     <label> <input type="radio" name="exclude-tag-mode" value="all" onchange="applyFiltersAndSort()"> –í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
                                    </label>
                                </div>
                                <div class="selected-tags-display" id="selected-exclude-tags">
                                    </div>
                            </div>

                             <hr style="margin: 10px 0;">

                            <div class="form-group">
                                <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–≥–∏:</label>
                                <div id="filter-tags-map">
                                    <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–≥–æ–≤...</p>
                                </div>
                              </div>
                            </fieldset>
                            </div>
                        </div>
            
                    </div> <div class="filter-actions">
                        <button id="apply-filters" class="btn btn-primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                        <button id="clear-filters" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
                    </div>
                </div>
            </div>
            </section>

            <div id="loading" class="loading-container">
                <div class="loading-spinner">
                    <div class="spinner" aria-hidden="true"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
            </div>

            <section id="novels-container" class="novels-container" style="display: none; position: relative;">
                <div id="stats-bar" class="stats-bar">
                    <div class="stats-info">
                        <span id="novels-count">0 –Ω–æ–≤–µ–ª–ª</span>
                        <span id="filter-info" class="filter-info"></span>
                    </div>
                    <div class="view-controls">
                        <button id="grid-view" class="view-btn active" title="–°–µ—Ç–∫–∞" aria-label="–í–∏–¥ —Å–µ—Ç–∫–∏">‚äû</button>
                        <button id="list-view" class="view-btn" title="–°–ø–∏—Å–æ–∫" aria-label="–í–∏–¥ —Å–ø–∏—Å–∫–∞">‚ò∞</button>
                    </div>
                </div>

                <div class="novels-loading-overlay" id="novels-loading-overlay" style="display: none;">
                  <div class="spinner"></div>
                </div>

                <div id="novels-grid" class="novels-grid" role="grid" aria-label="–°–ø–∏—Å–æ–∫ –Ω–æ–≤–µ–ª–ª"></div>
                <div id="no-results" class="no-results" style="display: none;">
                    <h3>–ù–æ–≤–µ–ª–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                    <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã</p>
                </div>

                <nav id="pagination" class="pagination" style="display: none;" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º">
                    <div class="pagination-wrapper">
                        <button id="first-page" class="pagination-btn" aria-label="–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">‚Æú</button>
                        <button id="prev-page" class="pagination-btn" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">‚óÄ</button>
                        <div id="page-numbers" class="page-numbers"></div>
                        <button id="next-page" class="pagination-btn" aria-label="–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">‚ñ∂</button>
                        <button id="last-page" class="pagination-btn" aria-label="–ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">‚Æû</button>
                    </div>
                    <div class="pagination-info">
                        <span id="page-info">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1</span>
                        <select id="per-page-select" class="per-page-select" aria-label="–ù–æ–≤–µ–ª–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ">
                            <option value="6">6 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</option>
                            <option value="12" selected>12 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</option>
                            <option value="24">24 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</option>
                            <option value="48">48 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</option>
                        </select>
                    </div>
                </nav>
            </section>

            <section id="page-content-container" style="display: none;"></section>

        </main>

        <footer class="footer" role="contentinfo">
            <div class="footer-content">
                <p>¬© 2025 –õ–æ–≥–æ–≤–æ –Ω–æ–≤–µ–ª–ª - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –¥–ª—è "–õ–æ–≥–æ–≤–∞ –°–æ–ª—ë–Ω–æ–π –†—ã–±–∫–∏"</p>
            </div>
        </footer>
    </div>

    <div id="auth-modal" class="modal" style="display: none;" role="dialog" aria-modal="true">
        <div class="modal-content auth-form-container">
            <button class="close-btn" onclick="hideModal('auth-modal')" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            
            <div id="auth-container">
                <h2>–í—Ö–æ–¥</h2>
                <div class="auth-method">
                    <input type="email" id="auth-email" class="form-input" placeholder="Email" required>
                    <input type="password" id="auth-password" class="form-input" placeholder="–ü–∞—Ä–æ–ª—å" required>
                    <button onclick="handleEmailLogin()" class="btn btn-primary">–í–æ–π—Ç–∏</button>
                </div>
                <div class="auth-divider">–∏–ª–∏</div>
                <div class="auth-method" id="telegram-login-widget-container">
                    <script async src="https://telegram.org/js/telegram-widget.js?22"
                        data-telegram-login="logovo_saltfish_bot"
                        data-size="large"
                        data-onauth="onTelegramAuth(user)"
                        data-request-access="write"></script>
                </div>
                <p class="auth-hint">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" onclick="showRegistration(); return false;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
            </div>

            <div id="registration-container" style="display: none;">
                <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                <div class="auth-method">
                    <input type="text" id="reg-username" class="form-input" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required>
                    <input type="email" id="reg-email" class="form-input" placeholder="Email" required>
                    <input type="password" id="reg-password" class="form-input" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)" required>
                    <button onclick="handleRegistration()" class="btn btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                </div>  
                <p class="auth-hint">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" onclick="showLogin(); return false;">–í–æ–π—Ç–∏</a></p>
            </div>
        </div>
    </div>
    
    <div id="novel-modal" class="modal" role="dialog" aria-labelledby="novel-details-title" aria-hidden="true">
        <div class="modal-content novel-details">
            <div class="modal-header">
                <h2 id="novel-details-title">–î–µ—Ç–∞–ª–∏ –Ω–æ–≤–µ–ª–ª—ã</h2>
                <button class="close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div id="novel-details-content" class="modal-body"></div>
        </div>
    </div>

    <div id="admin-modal" class="modal" role="dialog" aria-labelledby="admin-title" aria-hidden="true">
        <div class="modal-content admin-panel">
            <div class="modal-header">
                <h2 id="admin-title">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
                <button class="close-btn" onclick="hideModal('admin-modal')" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="modal-body">
                <div id="admin-content" class="admin-content">
                    <section id="database-tab" class="tab-content active" role="tabpanel">
                        <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î</h3>
                        <div class="admin-actions">
                            <button id="init-db-btn" class="btn btn-primary owner-only">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                            <button id="cleanup-trash-btn" class="btn btn-warning">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
                            <button id="export-data-btn" class="btn btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç</button>
                        </div>
                        <div id="db-status" class="status-panel"></div>
                    </section>

                    <section id="genres-tab" class="tab-content" role="tabpanel">
                        <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞–º–∏</h3>
                        <form class="add-item-form">
                            <input type="text" id="new-genre-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" class="form-input" required />
                            <input type="text" id="new-genre-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" class="form-input">
                            <button type="submit" id="add-genre-btn" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </form>
                        <div id="genres-management" class="items-list"></div>
                    </section>

                    <section id="tags-tab" class="tab-content" role="tabpanel">
                        <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏</h3>
                        <form class="add-item-form">
                            <input type="text" id="new-tag-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" class="form-input" required />
                            <input type="text" id="new-tag-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" class="form-input">
                            <button type="submit" id="add-tag-btn" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </form>
                        <div id="tags-management" class="items-list"></div>
                    </section>

                    <section id="trash-tab" class="tab-content" role="tabpanel">
                        <h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
                        <div class="trash-actions"><button id="empty-trash-btn" class="btn btn-danger">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button></div>
                        <div id="trash-items" class="trash-list"></div>
                    </section>

                    <section id="access-tab" class="tab-content" role="tabpanel">
                        <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞–º–∏</h3>
                        <p>–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</p>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <div id="sort-popup" class="sort-popup" style="display: none;">
        <h4>–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ:</h4>
        <div class="sort-options">
            <button class="sort-option" data-value="updated_desc">–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–ù–æ–≤—ã–µ)</button>
            <button class="sort-option" data-value="updated_asc">–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–°—Ç–∞—Ä—ã–µ)</button>
            <button class="sort-option" data-value="added_desc">–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–ù–æ–≤—ã–µ)</button>
            <button class="sort-option" data-value="added_asc">–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–°—Ç–∞—Ä—ã–µ)</button>
            <button class="sort-option" data-value="title_asc">–ù–∞–∑–≤–∞–Ω–∏–µ (–ê ‚Üí –Ø)</button>
            <button class="sort-option" data-value="title_desc">–ù–∞–∑–≤–∞–Ω–∏–µ (–Ø ‚Üí –ê)</button>
        </div>
    </div>

    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-box">
            <div class="loading-spinner-large"></div>
            <h3 id="loading-title">–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è...</h3>
            <p id="loading-description">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ</p>
            <div class="progress-container" id="progress-container" style="display: none;">
                <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
                <span class="progress-text" id="progress-text">0%</span>
            </div>
        </div>
    </div>
    
    <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>

    <div id="shortcuts-info" class="shortcuts-info" style="display: none;">
        <h4>–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:</h4>
        <ul>
            <li><kbd>Ctrl</kbd> + <kbd>K</kbd> - –ü–æ–∏—Å–∫</li>
            <li><kbd>Ctrl</kbd> + <kbd>N</kbd> - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–µ–ª–ª—É</li>
            <li><kbd>Esc</kbd> - –ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–∞</li>
            <li><kbd>?</kbd> - –ü–æ–º–æ—â—å</li>
        </ul>
    </div>
    
    <div class="scrollbar-container">
        <div class="custom-scrollbar"></div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>